[mysqld]
log-bin = mysql-bin
server-id = 1
max_connections=5000
slow_query_log = 1
long_query_time = 20
interactive_timeout = 60
wait_timeout = 30
expire_logs_days = 7
performance_schema = 1

user = mysql
bind-address = 0.0.0.0
mysqlx-bind-address = 127.0.0.1
key_buffer_size = 16M
myisam-recover-options = BACKUP
#log_error = stderr
max_binlog_size = 100M

default-authentication-plugin=caching_sha2_password

# InnoDB variables

innodb_buffer_pool_size = 16G
innodb_rollback_on_timeout = 1
innodb_file_per_table = 1
innodb_buffer_pool_instances = 8
innodb_stats_on_metadata = 0

innodb_log_buffer_size = 1G
innodb_log_file_size = 512M
innodb_page_size = 16384
innodb_log_write_ahead_size = 16384
innodb_rollback_on_timeout = 1
innodb_io_capacity = 2000
innodb_read_io_threads = 64
innodb_write_io_threads = 64
innodb_thread_concurrency = 0

[mysqldump]
quick
quote-names
max_allowed_packet = 16M